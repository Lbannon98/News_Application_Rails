<h1>Public Articles</h1>

<div class="container">
  <br>
  <%= form_tag articles_path, :method => 'get' do %>
    <%= text_field_tag :search, params[:search], placeholder: "Search", class: "form-control" %>

    <br>
    <%= submit_tag "Search", class: "btn btn-primary" %>

  <% end %>
  <br>

  <%#= search_form_for @search do |f| %>
<!--    <div class="field">-->
      <%#= f.label :name_cont, "Search: Name Contains"%>
      <%#= f.text_field :name_cont, class: "form-control" %>
<!--    </div>-->
<!--    <div class="actions">-->
      <%#= f.submit "Search", class: "btn btn-success"%>
<!--    </div>-->

<!--    <br>-->
  <%# end %>


<!--  <div class="card">-->
<!--    <div class="card-block">-->
<!--      <h4 class="card-title"> <%#= sort_link @search, :name, "Name" %> </h4>-->
      <%#= article.headline%>
      <%#= @cleansedHeadline %>
<!--      <p class="card-text">  </p>-->
      <%#= article.body%>
      <%#= @cleansedBody %>
      <%#= article.body%>
<!--      <h5 class="card-text"></h5>-->
<!--      Published By: <%#= article.editor.email %>-->

<!--      <br>-->

<!--    </div>-->
<!--  </div>-->

  <% @articles.each do |article| %>
  <div class="card">
    <div class="card-block">
      <h4 class="card-title"> <%= article.headline%> </h4>
      <%#= article.headline%>
      <%#= @cleansedHeadline %>
      <p class="card-text"> <%= article.body%> </p>
      <%#= @cleansedBody %>
      <%#= article.body%>
      <h5 class="card-text">Published By: <%= article.editor.email %></h5>

      <br>

      <% if current_user || current_editor%>
          <button type="button" class="btn btn-outline-primary">
            <%= link_to 'Show', article %>
          </button>
        <% end %>

      <% if current_editor %>

        <button type="button" class="btn btn-outline-primary" style="alignment: right">
          <%= link_to 'Edit', edit_article_path(article) %>
        </button>

        <button type="button" class="btn btn-outline-primary" style="alignment: right">
          <%= link_to 'Delete', article, method: :delete, data: { confirm: 'Are you sure?' } %>
        </button>

      <%end %>

    </div>
  </div>
  <% end %>

  <br>

  <% if current_editor %>

    <button type="button" class="btn btn-outline-primary">
      <%= link_to 'New Article', new_article_path %>
    </button>

  <%end %>

</div>

<%= render 'layouts/footer' %>

